/*
 * IMMEDIATE IMAGE STRETCHING FIXES
 * Addresses all image distortion and aspect ratio issues
 */

/* Global image standardization */
img, picture, video {
  max-width: 100%;
  height: auto;
  display: block;
  object-fit: cover;
  object-position: center;
}

/* Next.js Image component fixes */
.next-image-wrapper {
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

.next-image-wrapper img {
  object-fit: cover !important;
  object-position: center !important;
  width: 100% !important;
  height: 100% !important;
}

/* Standardize aspect ratios */
.aspect-ratio-square {
  aspect-ratio: 1 / 1;
}

.aspect-ratio-video {
  aspect-ratio: 16 / 9;
}

.aspect-ratio-portrait {
  aspect-ratio: 3 / 4;
}

.aspect-ratio-landscape {
  aspect-ratio: 4 / 3;
}

.aspect-ratio-hero {
  aspect-ratio: 21 / 9;
}

/* Object-fit utility classes */
.object-cover {
  object-fit: cover !important;
}

.object-contain {
  object-fit: contain !important;
}

.object-fill {
  object-fit: fill !important;
}

.object-none {
  object-fit: none !important;
}

.object-scale-down {
  object-fit: scale-down !important;
}

/* Object-position utility classes */
.object-center {
  object-position: center !important;
}

.object-top {
  object-position: top !important;
}

.object-bottom {
  object-position: bottom !important;
}

.object-left {
  object-position: left !important;
}

.object-right {
  object-position: right !important;
}

/* Hero section image fixes */
.hero-background-image {
  position: absolute;
  top: 0;
  left: 0;
  width: 100% !important;
  height: 100% !important;
  object-fit: cover !important;
  object-position: center !important;
  z-index: -1;
}

/* Background image to img tag conversion utility */
.bg-image-replacement {
  position: relative;
  overflow: hidden;
}

.bg-image-replacement::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  z-index: -1;
}

/* Card image fixes */
.card-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  border-radius: inherit;
}

.card-image-container {
  position: relative;
  width: 100%;
  height: 200px; /* Default height, override as needed */
  overflow: hidden;
  border-radius: inherit;
}

/* Avatar and profile image fixes */
.avatar-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  border-radius: 50%;
}

.profile-image-container {
  position: relative;
  border-radius: 50%;
  overflow: hidden;
  aspect-ratio: 1 / 1;
}

/* Logo image fixes */
.logo-image {
  object-fit: contain !important;
  object-position: center !important;
  width: auto !important;
  height: auto !important;
  max-width: 100% !important;
  max-height: 100% !important;
}

.logo-container {
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

/* Gallery and grid image fixes */
.gallery-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  transition: transform 0.3s ease, object-position 0.3s ease;
}

.gallery-image:hover {
  transform: scale(1.05);
}

.gallery-container {
  position: relative;
  overflow: hidden;
  aspect-ratio: 1 / 1; /* Default to square, override as needed */
}

/* Responsive image containers */
.responsive-image-container {
  position: relative;
  width: 100%;
  height: auto;
  overflow: hidden;
}

.responsive-image-container img {
  width: 100%;
  height: auto;
  object-fit: cover;
  object-position: center;
}

/* Mobile-specific image fixes */
@media (max-width: 768px) {
  .hero-background-image {
    object-position: center center !important;
  }
  
  .mobile-image-optimize {
    object-fit: cover !important;
    width: 100% !important;
    height: auto !important;
  }
  
  .card-image-container {
    height: 150px; /* Smaller height on mobile */
  }
}

/* Image loading states */
.image-loading {
  background: linear-gradient(90deg, #1a1a1a 0%, #333 50%, #1a1a1a 100%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.image-error {
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 107, 53, 0.1);
  border: 1px solid rgba(255, 107, 53, 0.3);
  color: rgba(255, 107, 53, 0.8);
  font-size: 0.875rem;
  padding: 1rem;
  text-align: center;
}

/* Performance optimizations */
.image-optimized {
  will-change: transform;
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Glass morphism image overlays */
.image-glass-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.1) 0%,
    rgba(255, 255, 255, 0.05) 100%
  );
  backdrop-filter: blur(2px);
  pointer-events: none;
}

.image-dark-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    135deg,
    rgba(26, 26, 26, 0.4) 0%,
    rgba(0, 0, 0, 0.6) 100%
  );
  pointer-events: none;
}

.image-fire-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    135deg,
    rgba(255, 107, 53, 0.1) 0%,
    rgba(255, 71, 87, 0.05) 50%,
    rgba(255, 140, 66, 0.1) 100%
  );
  backdrop-filter: blur(1px);
  pointer-events: none;
}

/* Critical fixes for existing problematic elements */
[style*="background-image"] {
  background-size: cover !important;
  background-position: center !important;
  background-repeat: no-repeat !important;
}

/* Force consistent behavior across all image elements */
.force-image-consistency img,
.force-image-consistency picture,
.force-image-consistency video {
  object-fit: cover !important;
  object-position: center !important;
  width: 100% !important;
  height: 100% !important;
}

/* Container query support for responsive images */
@container (max-width: 400px) {
  .container-responsive-image {
    height: 120px;
  }
}

@container (min-width: 401px) and (max-width: 768px) {
  .container-responsive-image {
    height: 180px;
  }
}

@container (min-width: 769px) {
  .container-responsive-image {
    height: 240px;
  }
}

/* High DPI display optimizations */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .high-dpi-image {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }
}

/* Accessibility improvements */
.image-alt-visible::after {
  content: attr(alt);
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 0.5rem;
  font-size: 0.75rem;
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
}

.image-alt-visible:hover::after {
  opacity: 1;
}

/* Print media optimizations */
@media print {
  img {
    object-fit: contain !important;
    max-height: 300px !important;
    break-inside: avoid;
  }
}