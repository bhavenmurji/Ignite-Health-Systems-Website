@tailwind base;
@tailwind components;
@tailwind utilities;

/* Import responsive fixes */
@import '../styles/responsive-fixes.css';
/* Import image fixes */
@import '../styles/image-fixes.css';

@layer base {
  :root {
    --background: 220 65% 2%;
    --foreground: 210 40% 98%;
    --card: 224 71.4% 4.1%;
    --card-foreground: 210 40% 98%;
    --popover: 224 71.4% 4.1%;
    --popover-foreground: 210 40% 98%;
    --primary: 20 100% 50%;
    --primary-foreground: 210 40% 98%;
    --primary-dark: 15 100% 45%;
    --primary-light: 25 100% 55%;
    --secondary: 215 27.9% 16.9%;
    --secondary-foreground: 210 40% 98%;
    --muted: 215 27.9% 16.9%;
    --muted-foreground: 217.9 10.6% 64.9%;
    --accent: 215 27.9% 16.9%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;
    --border: 215 27.9% 16.9%;
    --input: 215 27.9% 16.9%;
    --ring: 20 100% 50%;
    --radius: 0.5rem;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
  }

  /* Viewport-aware containers */
  .container-responsive {
    width: 100%;
    max-width: none;
    margin-left: auto;
    margin-right: auto;
    padding-left: clamp(1rem, 4vw, 2rem);
    padding-right: clamp(1rem, 4vw, 2rem);
  }

  /* Responsive text sizing */
  .text-responsive-hero {
    font-size: clamp(2rem, 5vw, 4rem);
    line-height: 1.1;
  }

  .text-responsive-title {
    font-size: clamp(1.5rem, 3vw, 2.5rem);
    line-height: 1.2;
  }

  .text-responsive-body {
    font-size: clamp(1rem, 2vw, 1.25rem);
    line-height: 1.6;
  }
}

@layer base {
  
  html {
    /* Prevent horizontal overflow */
    overflow-x: hidden;
    /* Improve iOS viewport behavior */
    -webkit-text-size-adjust: 100%;
    /* Better font rendering */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  body {
    /* Prevent horizontal overflow */
    overflow-x: hidden;
    /* Responsive width */
    width: 100vw;
    max-width: 100%;
    /* Better touch handling on mobile */
    touch-action: manipulation;
  }

  /* Responsive container */
  .main-container {
    width: 100%;
    max-width: 100vw;
    overflow-x: hidden;
    position: relative;
  }
}

/* Cinematic styles */
.cinematic-fade {
  animation: cinematicFadeIn 3s ease-out forwards;
}

@keyframes cinematicFadeIn {
  0% {
    opacity: 0;
    transform: scale(1.05);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

.text-focus-effect {
  animation: textFocusIn 2s ease-out 1s forwards;
  opacity: 0;
  filter: blur(4px);
}

@keyframes textFocusIn {
  0% {
    opacity: 0;
    filter: blur(4px);
    transform: translateY(20px);
  }
  100% {
    opacity: 1;
    filter: blur(0px);
    transform: translateY(0);
  }
}

.hero-image-blur {
  animation: heroImageBlur 4s ease-out 2s forwards;
  filter: blur(0px);
}

@keyframes heroImageBlur {
  0% {
    filter: blur(0px);
  }
  100% {
    filter: blur(2px);
  }
}

/* Gradient overlays for cinematic effect */
.gradient-overlay {
  background: linear-gradient(
    45deg,
    rgba(255, 69, 0, 0.1) 0%,
    rgba(255, 140, 0, 0.05) 25%,
    rgba(0, 0, 0, 0.3) 50%,
    rgba(139, 69, 19, 0.05) 75%,
    rgba(255, 69, 0, 0.1) 100%
  );
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: hsl(var(--background));
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--primary));
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--primary-light));
}

/* Smooth transitions and responsive behavior */
* {
  scroll-behavior: smooth;
  /* Prevent horizontal overflow on all elements */
  max-width: 100%;
  box-sizing: border-box;
}

/* Responsive images and media */
img, video, iframe {
  max-width: 100%;
  height: auto;
}

/* Responsive grid improvements */
.grid-responsive {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(min(300px, 100%), 1fr));
  gap: clamp(1rem, 3vw, 2rem);
}

/* Better viewport units for mobile */
.min-h-screen-safe {
  min-height: 100vh;
  min-height: 100svh;
}

.h-screen-safe {
  height: 100vh;
  height: 100svh;
}

/* Audio player hidden but functional */
.cinematic-audio {
  position: fixed;
  top: -9999px;
  left: -9999px;
  opacity: 0;
  pointer-events: none;
}

@layer components {
  .fire-gradient {
    background: linear-gradient(to right, #f97316, #ea580c, #c2410c);
  }

  .fire-glow {
    box-shadow: 0 0 20px rgba(249, 115, 22, 0.3);
  }

  .fire-text {
    background: linear-gradient(to right, #f97316, #ea580c, #c2410c);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .ember-gradient {
    background: linear-gradient(to right, #dc2626, #b91c1c, #991b1b);
  }

  .flame-gradient {
    background: linear-gradient(to right, #fb923c, #f97316, #ea580c);
  }

  /* Responsive component utilities */
  .responsive-section {
    width: 100%;
    max-width: 100vw;
    overflow-x: hidden;
    padding-left: clamp(1rem, 4vw, 2rem);
    padding-right: clamp(1rem, 4vw, 2rem);
  }

  .responsive-card {
    width: 100%;
    max-width: 100%;
    min-width: 0; /* Allows flex items to shrink */
  }

  .responsive-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(min(250px, 100%), 1fr));
    gap: clamp(0.5rem, 2vw, 1.5rem);
    width: 100%;
  }

  .responsive-flex {
    display: flex;
    flex-wrap: wrap;
    gap: clamp(0.5rem, 2vw, 1rem);
    width: 100%;
  }
}

/* Audio visualization styles */
.audio-visualizer {
  display: flex;
  align-items: flex-end;
  justify-content: center;
  gap: 0.25rem;
  height: 2rem;
}

.audio-bar {
  background-color: #f97316;
  border-radius: 9999px;
  transition: all 150ms ease-out;
  width: 3px;
  min-height: 4px;
}

.audio-bar.active {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  background-color: #fb923c;
}

/* Health-specific styles */
.health-gradient {
  background: linear-gradient(135deg, #22c55e, #16a34a, #15803d);
}

.medical-glow {
  box-shadow: 0 0 20px rgba(34, 197, 94, 0.3);
}

.healthcare-accent {
  background: linear-gradient(to right, #22c55e, #3b82f6, #6366f1);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

/* Responsive design utilities */
@media (max-width: 640px) {
  .hide-on-mobile {
    display: none !important;
  }
  
  .text-responsive-mobile {
    font-size: clamp(0.875rem, 4vw, 1.125rem) !important;
  }
}

@media (min-width: 641px) and (max-width: 1024px) {
  .hide-on-tablet {
    display: none !important;
  }
}

@media (min-width: 1025px) {
  .hide-on-desktop {
    display: none !important;
  }
}

/* Container queries for responsive components */
@container (max-width: 400px) {
  .container-responsive-text {
    font-size: 0.875rem;
  }
}

@container (min-width: 401px) and (max-width: 600px) {
  .container-responsive-text {
    font-size: 1rem;
  }
}

@container (min-width: 601px) {
  .container-responsive-text {
    font-size: 1.125rem;
  }
}