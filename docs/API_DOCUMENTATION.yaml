openapi: 3.0.0
info:
  title: Ignite Health Systems API
  version: 1.0.0
  description: |
    Comprehensive API documentation for Ignite Health Systems platform.

    This API provides endpoints for:
    - Healthcare professional registration and waitlist management
    - Newsletter subscription with GDPR compliance
    - Clinical Innovation Council applications
    - File uploads for CV/resume submission
    - Administrative statistics and reporting

    ## Authentication
    Currently uses email-based authentication for form submissions.
    OAuth integration is planned for future releases.

    ## Rate Limiting
    - 100 requests per minute per IP address
    - 5 newsletter subscriptions per hour per IP address
    - 10 form submissions per hour per IP address

    ## Security Features
    - HIPAA compliance ready
    - GDPR compliant data handling
    - SSL/TLS encryption required
    - Input sanitization and validation
    - File upload restrictions and scanning

  termsOfService: https://ignitehealthsystems.com/terms
  contact:
    name: Ignite Health Systems API Support
    email: api-support@ignitehealthsystems.com
    url: https://ignitehealthsystems.com/support
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: https://api.ignitehealthsystems.com
    description: Production API Server
  - url: https://staging-api.ignitehealthsystems.com
    description: Staging API Server
  - url: http://localhost:3001
    description: Development Server

paths:
  /health:
    get:
      tags:
        - Health Check
      summary: API Health Check
      description: Returns the current health status of the API server
      operationId: getHealthCheck
      responses:
        '200':
          description: API is healthy and operational
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "healthy"
                  timestamp:
                    type: string
                    format: date-time
                    example: "2025-01-15T10:30:00Z"
                  version:
                    type: string
                    example: "1.0.0"
                  uptime:
                    type: number
                    example: 86400
              examples:
                healthy:
                  summary: Healthy API Response
                  value:
                    status: "healthy"
                    timestamp: "2025-01-15T10:30:00Z"
                    version: "1.0.0"
                    uptime: 86400
        '503':
          $ref: '#/components/responses/ServiceUnavailable'

  /api/submit:
    post:
      tags:
        - Healthcare Professional Registration
      summary: Submit Healthcare Professional Application
      description: |
        Submit application for healthcare professional waitlist and
        Clinical Innovation Council membership
      operationId: submitApplication
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - fullName
                - email
                - specialty
                - practice
                - practiceModel
                - challenge
              properties:
                fullName:
                  type: string
                  minLength: 2
                  maxLength: 100
                  example: "Dr. Sarah Johnson"
                  description: "Full name of the healthcare professional"
                email:
                  type: string
                  format: email
                  example: "sarah.johnson@example.com"
                  description: "Professional email address"
                specialty:
                  type: string
                  minLength: 2
                  maxLength: 100
                  example: "Cardiology"
                  description: "Medical specialty or area of practice"
                practice:
                  type: string
                  minLength: 2
                  maxLength: 200
                  example: "City Medical Center"
                  description: "Name of practice or healthcare organization"
                practiceModel:
                  type: string
                  enum:
                    - "Solo Practice"
                    - "Group Practice"
                    - "Hospital Employment"
                    - "Academic Medical Center"
                    - "Locum Tenens"
                    - "Telemedicine"
                    - "Other"
                  example: "Group Practice"
                  description: "Type of practice model"
                council:
                  type: string
                  enum: ["yes", "no"]
                  example: "yes"
                  description: "Interest in joining Clinical Innovation Council"
                challenge:
                  type: string
                  minLength: 10
                  maxLength: 1000
                  example: "Electronic health records take too much time away from patient care"
                  description: "Primary healthcare challenge they want to solve"
                cv:
                  type: string
                  format: binary
                  description: "CV/Resume file upload (PDF only, max 10MB)"
            encoding:
              cv:
                contentType: application/pdf
      responses:
        '200':
          description: Application submitted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Thank you for joining the 10-Minute Revolution!"
                  submissionId:
                    type: string
                    example: "1642176000000"
                  nextSteps:
                    type: array
                    items:
                      type: string
                    example:
                      - "Check your email for confirmation"
                      - "Expect follow-up within 24-48 hours"
                      - "Join our community Slack channel"
              examples:
                success:
                  summary: Successful Submission
                  value:
                    success: true
                    message: "Thank you for joining the 10-Minute Revolution!"
                    submissionId: "1642176000000"
        '400':
          $ref: '#/components/responses/BadRequest'
        '413':
          description: File too large
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              examples:
                fileTooLarge:
                  summary: File Size Exceeded
                  value:
                    success: false
                    error: "File too large"
                    message: "CV file must be under 10MB"
        '415':
          description: Unsupported media type
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              examples:
                invalidFileType:
                  summary: Invalid File Type
                  value:
                    success: false
                    error: "Unsupported file type"
                    message: "Only PDF files are allowed"
        '429':
          $ref: '#/components/responses/RateLimited'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/stats:
    get:
      tags:
        - Analytics
      summary: Get Application Statistics
      description: |
        Retrieve aggregated statistics about applications and registrations.
        This endpoint requires administrative access.
      operationId: getApplicationStats
      security:
        - ApiKeyAuth: []
      responses:
        '200':
          description: Statistics retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    type: integer
                    example: 1250
                    description: "Total number of applications"
                  councilInterest:
                    type: integer
                    example: 750
                    description: "Applications interested in Clinical Innovation Council"
                  practiceModels:
                    type: object
                    additionalProperties:
                      type: integer
                    example:
                      "Group Practice": 450
                      "Hospital Employment": 320
                      "Solo Practice": 280
                      "Academic Medical Center": 200
                  specialties:
                    type: object
                    additionalProperties:
                      type: integer
                    example:
                      "Internal Medicine": 180
                      "Family Medicine": 150
                      "Cardiology": 120
                      "Emergency Medicine": 100
                  recentSubmissions:
                    type: array
                    maxItems: 5
                    items:
                      $ref: '#/components/schemas/ApplicationSummary'
                  trends:
                    type: object
                    properties:
                      daily:
                        type: array
                        items:
                          type: object
                          properties:
                            date:
                              type: string
                              format: date
                            count:
                              type: integer
                      conversion_rate:
                        type: number
                        format: float
                        example: 0.85
              examples:
                statisticsResponse:
                  summary: Application Statistics
                  value:
                    total: 1250
                    councilInterest: 750
                    practiceModels:
                      "Group Practice": 450
                      "Hospital Employment": 320
                    specialties:
                      "Internal Medicine": 180
                      "Family Medicine": 150
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '500':
          $ref: '#/components/responses/InternalServerError'

  /api/newsletter:
    post:
      tags:
        - Newsletter
      summary: Subscribe to Newsletter
      description: |
        Subscribe to Ignite Health Systems newsletter with GDPR compliance.
        Integrates with Mailchimp for email marketing automation.
      operationId: subscribeNewsletter
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - consent
              properties:
                email:
                  type: string
                  format: email
                  example: "doctor@example.com"
                  description: "Subscriber's email address"
                firstName:
                  type: string
                  maxLength: 50
                  example: "Sarah"
                  description: "Subscriber's first name"
                lastName:
                  type: string
                  maxLength: 50
                  example: "Johnson"
                  description: "Subscriber's last name"
                role:
                  type: string
                  enum:
                    - "physician"
                    - "nurse"
                    - "administrator"
                    - "other"
                  example: "physician"
                  description: "Professional role"
                consent:
                  type: boolean
                  example: true
                  description: "GDPR consent for email communication"
                source:
                  type: string
                  example: "website_footer"
                  description: "Source of subscription"
                interests:
                  type: array
                  items:
                    type: string
                  example: ["AI_updates", "case_studies", "webinars"]
                  description: "Areas of interest for targeted content"
            examples:
              basicSubscription:
                summary: Basic Newsletter Subscription
                value:
                  email: "doctor@example.com"
                  firstName: "Sarah"
                  consent: true
                  source: "website_footer"
              fullSubscription:
                summary: Full Newsletter Subscription
                value:
                  email: "doctor@example.com"
                  firstName: "Sarah"
                  lastName: "Johnson"
                  role: "physician"
                  consent: true
                  source: "homepage_signup"
                  interests: ["AI_updates", "case_studies"]
      responses:
        '201':
          description: Successfully subscribed to newsletter
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Successfully subscribed to newsletter"
                  data:
                    type: object
                    properties:
                      email:
                        type: string
                        example: "doctor@example.com"
                      status:
                        type: string
                        example: "subscribed"
                      subscriptionId:
                        type: string
                        example: "mc_12345"
                      confirmationRequired:
                        type: boolean
                        example: false
        '400':
          description: Invalid request data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              examples:
                missingConsent:
                  summary: Missing GDPR Consent
                  value:
                    error: "Validation failed"
                    message: "GDPR consent is required for newsletter subscription"
                    field: "consent"
                invalidEmail:
                  summary: Invalid Email Format
                  value:
                    error: "Validation failed"
                    message: "Invalid email address format"
                    field: "email"
        '409':
          description: Email already subscribed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              examples:
                alreadySubscribed:
                  summary: Already Subscribed
                  value:
                    error: "Already subscribed"
                    message: "This email address is already subscribed to our newsletter"
        '429':
          $ref: '#/components/responses/RateLimited'
        '503':
          description: Newsletter service unavailable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              examples:
                serviceUnavailable:
                  summary: Service Unavailable
                  value:
                    error: "Subscription failed"
                    message: "Newsletter service is temporarily unavailable"

    get:
      tags:
        - Newsletter
      summary: Get Newsletter Service Status
      description: Check the health and configuration of newsletter integration
      operationId: getNewsletterStatus
      responses:
        '200':
          description: Newsletter service status
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "healthy"
                  service:
                    type: string
                    example: "newsletter-api"
                  mailchimp:
                    type: object
                    properties:
                      configured:
                        type: boolean
                        example: true
                      url:
                        type: string
                        example: "https://eepurl.com/abc123"
                  subscribers:
                    type: object
                    properties:
                      total:
                        type: integer
                        example: 2500
                      active:
                        type: integer
                        example: 2350
                      growth_rate:
                        type: number
                        format: float
                        example: 0.15

    delete:
      tags:
        - Newsletter
      summary: Unsubscribe from Newsletter
      description: Remove email address from newsletter subscription
      operationId: unsubscribeNewsletter
      parameters:
        - name: email
          in: query
          required: true
          schema:
            type: string
            format: email
          example: "doctor@example.com"
          description: "Email address to unsubscribe"
      responses:
        '200':
          description: Successfully unsubscribed
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  email:
                    type: string
                    example: "doctor@example.com"
                  message:
                    type: string
                    example: "Successfully unsubscribed from newsletter"
        '400':
          description: Missing email parameter
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Email not found in subscription list
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key
      description: API key for administrative endpoints

    OAuth2:
      type: oauth2
      description: OAuth 2.0 authentication (planned for future release)
      flows:
        authorizationCode:
          authorizationUrl: https://accounts.google.com/oauth/authorize
          tokenUrl: https://accounts.google.com/oauth/token
          scopes:
            read: Read access to user data
            write: Write access to user data

  schemas:
    ApplicationSummary:
      type: object
      properties:
        id:
          type: string
          example: "1642176000000"
        fullName:
          type: string
          example: "Dr. Sarah Johnson"
        specialty:
          type: string
          example: "Cardiology"
        practiceModel:
          type: string
          example: "Group Practice"
        councilInterest:
          type: boolean
          example: true
        submittedAt:
          type: string
          format: date-time
          example: "2025-01-15T10:30:00Z"
        status:
          type: string
          enum: ["pending", "reviewed", "approved", "rejected"]
          example: "pending"

    Error:
      type: object
      required:
        - error
        - message
      properties:
        success:
          type: boolean
          example: false
        error:
          type: string
          example: "Validation failed"
        message:
          type: string
          example: "Required fields are missing"
        field:
          type: string
          example: "email"
          description: "Field that caused the error (if applicable)"
        code:
          type: string
          example: "VALIDATION_ERROR"
        timestamp:
          type: string
          format: date-time
          example: "2025-01-15T10:30:00Z"

    HealthStatus:
      type: object
      properties:
        status:
          type: string
          enum: ["healthy", "degraded", "unhealthy"]
        timestamp:
          type: string
          format: date-time
        services:
          type: object
          properties:
            database:
              type: string
              enum: ["healthy", "degraded", "unhealthy"]
            email:
              type: string
              enum: ["healthy", "degraded", "unhealthy"]
            storage:
              type: string
              enum: ["healthy", "degraded", "unhealthy"]

  responses:
    BadRequest:
      description: Bad request - Invalid input data
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            validationError:
              summary: Validation Error
              value:
                success: false
                error: "Validation failed"
                message: "Required fields are missing"
                code: "VALIDATION_ERROR"

    Unauthorized:
      description: Unauthorized - Invalid or missing authentication
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            missingAuth:
              summary: Missing Authentication
              value:
                success: false
                error: "Unauthorized"
                message: "Authentication required for this endpoint"
                code: "AUTH_REQUIRED"

    Forbidden:
      description: Forbidden - Insufficient permissions
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            insufficientPermissions:
              summary: Insufficient Permissions
              value:
                success: false
                error: "Forbidden"
                message: "Insufficient permissions to access this resource"
                code: "INSUFFICIENT_PERMISSIONS"

    RateLimited:
      description: Rate limit exceeded
      headers:
        X-RateLimit-Limit:
          schema:
            type: integer
          description: Request limit per time window
        X-RateLimit-Remaining:
          schema:
            type: integer
          description: Requests remaining in current window
        X-RateLimit-Reset:
          schema:
            type: integer
          description: Seconds until rate limit resets
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            rateLimitExceeded:
              summary: Rate Limit Exceeded
              value:
                success: false
                error: "Rate limit exceeded"
                message: "Too many requests. Please try again later."
                code: "RATE_LIMIT_EXCEEDED"

    InternalServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            serverError:
              summary: Internal Server Error
              value:
                success: false
                error: "Internal server error"
                message: "An unexpected error occurred. Please try again later."
                code: "INTERNAL_ERROR"

    ServiceUnavailable:
      description: Service temporarily unavailable
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          examples:
            serviceUnavailable:
              summary: Service Unavailable
              value:
                success: false
                error: "Service unavailable"
                message: "Service is temporarily unavailable for maintenance"
                code: "SERVICE_UNAVAILABLE"

  parameters:
    LimitParam:
      name: limit
      in: query
      description: Number of items to return
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20

    OffsetParam:
      name: offset
      in: query
      description: Number of items to skip
      schema:
        type: integer
        minimum: 0
        default: 0

    SortParam:
      name: sort
      in: query
      description: Sort order
      schema:
        type: string
        enum: ["asc", "desc"]
        default: "desc"

  examples:
    ApplicationSubmissionExample:
      summary: Healthcare Professional Application
      description: Complete application for healthcare professional registration
      value:
        fullName: "Dr. Sarah Johnson"
        email: "sarah.johnson@citymedical.com"
        specialty: "Cardiology"
        practice: "City Medical Center"
        practiceModel: "Group Practice"
        council: "yes"
        challenge: "Electronic health records consume 60% of my patient visit time, leaving only 40% for actual patient care. The constant clicking through screens disrupts the doctor-patient relationship and leads to physician burnout. We need AI that can handle documentation seamlessly while I focus on healing."

tags:
  - name: Health Check
    description: API health and monitoring endpoints

  - name: Healthcare Professional Registration
    description: |
      Endpoints for healthcare professional registration, waitlist management,
      and Clinical Innovation Council applications

  - name: Newsletter
    description: |
      Newsletter subscription management with GDPR compliance and
      Mailchimp integration

  - name: Analytics
    description: Administrative endpoints for statistics and reporting

externalDocs:
  description: Find more information about Ignite Health Systems
  url: https://ignitehealthsystems.com/docs