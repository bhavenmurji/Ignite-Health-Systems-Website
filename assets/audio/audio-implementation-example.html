<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Background Music Implementation Example</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .audio-controls {
            margin: 20px 0;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 8px;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            background: #007bff;
            color: white;
            cursor: pointer;
        }
        button:hover {
            background: #0056b3;
        }
        .code-block {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            margin: 15px 0;
            overflow-x: auto;
        }
        pre {
            margin: 0;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>Background Music Implementation</h1>
    
    <h2>Audio Files Available:</h2>
    <ul>
        <li><strong>backing-music.mp3</strong> (737KB, 192kbps) - High quality</li>
        <li><strong>backing-music-compressed.mp3</strong> (492KB, 128kbps) - Web optimized</li>
    </ul>

    <div class="audio-controls">
        <h3>Audio Controls</h3>
        <button onclick="playMusic()">Play Music</button>
        <button onclick="pauseMusic()">Pause Music</button>
        <button onclick="toggleMute()">Toggle Mute</button>
        <button onclick="setVolume(0.5)">Set Volume 50%</button>
        
        <!-- Hidden audio element for background music -->
        <audio id="backgroundMusic" loop preload="auto">
            <source src="backing-music-compressed.mp3" type="audio/mpeg">
            <source src="backing-music.mp3" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
    </div>

    <h2>Implementation Code Examples:</h2>

    <h3>1. Basic HTML Audio Element (Hidden, Auto-loop)</h3>
    <div class="code-block">
        <pre><code>&lt;!-- Hidden background music with continuous loop --&gt;
&lt;audio id="backgroundMusic" autoplay loop muted preload="auto" style="display: none;"&gt;
    &lt;source src="assets/audio/backing-music-compressed.mp3" type="audio/mpeg"&gt;
    &lt;source src="assets/audio/backing-music.mp3" type="audio/mpeg"&gt;
    Your browser does not support the audio element.
&lt;/audio&gt;</code></pre>
    </div>

    <h3>2. JavaScript Control Implementation</h3>
    <div class="code-block">
        <pre><code>// Get audio element
const backgroundMusic = document.getElementById('backgroundMusic');

// Play music
function playMusic() {
    backgroundMusic.play().catch(e => console.log('Audio play failed:', e));
}

// Pause music
function pauseMusic() {
    backgroundMusic.pause();
}

// Toggle mute
function toggleMute() {
    backgroundMusic.muted = !backgroundMusic.muted;
}

// Set volume (0.0 to 1.0)
function setVolume(level) {
    backgroundMusic.volume = level;
}

// Auto-play with user interaction (Chrome policy compliant)
document.addEventListener('click', function() {
    if (backgroundMusic.paused) {
        playMusic();
    }
}, { once: true });</code></pre>
    </div>

    <h3>3. React/Next.js Implementation</h3>
    <div class="code-block">
        <pre><code>import { useEffect, useRef } from 'react';

function BackgroundMusic() {
    const audioRef = useRef(null);

    useEffect(() => {
        const audio = audioRef.current;
        
        // Set low volume for background music
        audio.volume = 0.3;
        
        // Try to play (may require user interaction)
        const playPromise = audio.play();
        if (playPromise !== undefined) {
            playPromise.catch(error => {
                console.log('Auto-play prevented:', error);
            });
        }
    }, []);

    return (
        &lt;audio
            ref={audioRef}
            loop
            preload="auto"
            style={{ display: 'none' }}
        &gt;
            &lt;source src="/assets/audio/backing-music-compressed.mp3" type="audio/mpeg" /&gt;
            &lt;source src="/assets/audio/backing-music.mp3" type="audio/mpeg" /&gt;
        &lt;/audio&gt;
    );
}</code></pre>
    </div>

    <h3>4. Vue.js Implementation</h3>
    <div class="code-block">
        <pre><code>&lt;template&gt;
    &lt;audio
        ref="backgroundMusic"
        loop
        preload="auto"
        style="display: none"
    &gt;
        &lt;source src="/assets/audio/backing-music-compressed.mp3" type="audio/mpeg"&gt;
        &lt;source src="/assets/audio/backing-music.mp3" type="audio/mpeg"&gt;
    &lt;/audio&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
    mounted() {
        this.$refs.backgroundMusic.volume = 0.3;
        
        // Auto-play on first user interaction
        document.addEventListener('click', () => {
            this.$refs.backgroundMusic.play();
        }, { once: true });
    }
}
&lt;/script&gt;</code></pre>
    </div>

    <h2>Important Notes:</h2>
    <ul>
        <li><strong>Browser Autoplay Policy:</strong> Most browsers require user interaction before playing audio</li>
        <li><strong>Volume Control:</strong> Keep background music at low volume (0.1-0.3)</li>
        <li><strong>User Control:</strong> Always provide play/pause controls for accessibility</li>
        <li><strong>File Size:</strong> Use compressed version (492KB) for faster loading</li>
        <li><strong>Fallback:</strong> Include multiple formats for browser compatibility</li>
    </ul>

    <script>
        // JavaScript for the demo controls
        const backgroundMusic = document.getElementById('backgroundMusic');
        
        function playMusic() {
            backgroundMusic.play().catch(e => console.log('Audio play failed:', e));
        }
        
        function pauseMusic() {
            backgroundMusic.pause();
        }
        
        function toggleMute() {
            backgroundMusic.muted = !backgroundMusic.muted;
        }
        
        function setVolume(level) {
            backgroundMusic.volume = level;
        }
        
        // Set initial volume
        backgroundMusic.volume = 0.3;
    </script>
</body>
</html>